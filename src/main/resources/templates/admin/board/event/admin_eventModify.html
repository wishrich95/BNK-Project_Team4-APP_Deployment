<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë”¸ê¹ì€í–‰::ì´ë²¤íŠ¸ ìˆ˜ì •</title>
    <link rel="stylesheet" th:href="@{/css/admin/admin_category.css}">
    <link rel="stylesheet" th:href="@{/css/admin/admin_eventModify.css}">
    <link rel="stylesheet" th:href="@{/css/common/style_font.css}"> <!-- ê³µìš© í°íŠ¸ -->
    <script th:src="@{/js/admin/admin_category.js}"></script>
    <script th:src="@{/js/admin/admin_eventWrite.js}"></script>
    <script>
        function deleteImage() {
            // ê¸°ì¡´ ì´ë¯¸ì§€ ì˜ì—­ ì‚­ì œ
            const imageWrapper = document.querySelector(".image-wrapper");
            if (imageWrapper) {
                imageWrapper.remove();
            }

            // ìˆ¨ê²¨ë‘” textarea / ì—…ë¡œë“œ ì˜ì—­ í‘œì‹œ
            document.getElementById("contentGroup").classList.remove("hidden");
            document.getElementById("uploadGroup").classList.remove("hidden");
        }
    </script>
</head>
<body>
    <div class="container" style="display: flex;">
        <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” - Fragment ì‚¬ìš© -->
        <div th:replace="~{admin/_adminSidebar :: sidebar}"></div>

        <div class="main-right">
            <div class="faq_title">
                <span class="title_sp">ì´ë²¤íŠ¸ ìˆ˜ì •</span>
            </div>

            <form th:action="@{/admin/event/modify}" method="post" enctype="multipart/form-data">
                <input type="hidden" name="id" th:value="${boardDTO.id}">
                <div class="form-group">
                    <label class="form-label">ì œëª©</label>
                    <input
                        type="text" name="title"
                        class="form-input" placeholder="ì´ë²¤íŠ¸ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
                        maxlength="100" th:value="${boardDTO.title}">
                </div>

                <!-- ì´ë¯¸ì§€ ì˜ì—­ -->
                <div class="event-content" id="eventContent" onclick="deleteImage()">
                    <div class="image-wrapper">
                        <img
                            th:src="@{/uploads/{file}(file=${boardDTO.file})}"
                            alt="ì´ë²¤íŠ¸ ìƒì„¸ ì´ë¯¸ì§€"
                            id="eventImage">
                    </div>
                </div>
                <!-- ì‚­ì œ í›„ ë³´ì´ê²Œ ë  ë‚´ìš© ì…ë ¥ ì˜ì—­ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) -->
                <div class="form-group hidden" id="contentGroup">
                    <label class="form-label">ë‚´ìš©</label>
                    <textarea
                        name="content" id="content"
                        class="form-textarea" placeholder="ì´ë²¤íŠ¸ ë‚´ìš©ì„ ìƒì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
                </div>

                <!-- ì‚­ì œ í›„ ë³´ì´ê²Œ ë  ì—…ë¡œë“œ ì˜ì—­ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) -->
                <div class="form-group hidden" id="uploadGroup">
                    <label class="form-label">ì²¨ë¶€ ì´ë¯¸ì§€</label>
                    <p class="form-description">ì´ë²¤íŠ¸ ë°°ë„ˆ ë˜ëŠ” ìƒì„¸ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš” (ìµœëŒ€ 10MB)</p>

                    <div class="file-upload-wrapper">
                        <label for="uploadFile" class="file-upload-area" id="fileUploadArea">
                            <div class="file-upload-icon">ğŸ“</div>
                            <div class="file-upload-text">íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
                            <div class="file-upload-hint">JPG, PNG, GIF (ìµœëŒ€ 10MB)</div>
                        </label>

                        <input type="file" name="uploadFile" id="uploadFile" accept="image/*">

                        <div class="file-preview" id="filePreview">
                            <div class="file-info">
                                <div class="file-name" id="fileName"></div>
                                <div class="file-size" id="fileSize"></div>
                            </div>
                            <button type="button" class="file-remove" id="fileRemove">âœ•</button>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-cancel" onclick="history.back()">ì·¨ì†Œí•˜ê¸°</button>
                    <button type="submit" class="btn btn-submit">ë“±ë¡í•˜ê¸°</button>
                </div>
            </form>
        </div>
    </div>
</body>
</html>